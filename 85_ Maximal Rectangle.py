# æ—¶é—´ï¼š20190516
# Example:
# Input:
# [
#   ["1","0","1","0","0"],
#   ["1","0","1","1","1"],
#   ["1","1","1","1","1"],
#   ["1","0","0","1","0"]
# ]
# Output: 6
# éš¾åº¦ï¼šHard(1.0)


class Solution:
    def maximalRectangle(self, matrix: List[List[str]]) -> int:
        if matrix == [] or matrix[0] == []:
            return 0
        ans = 0
        height = [0] * (len(matrix[0]) + 1)

        for row in matrix:
            for i in range(len(row)):
                height[i] = height[i] + 1 if row[i] == '1' else 0
            stack = [-1]
            for i in range(len(height)):
                while height[i] < height[stack[-1]]:
                    index = stack.pop()
                    h = height[index]
                    w = i - stack[-1] - 1
                    ans = max(ans, h * w)
                stack.append(i)
        return ans

    """
    Disscussion Method
    ç®—æ³•ï¼šå•è°ƒæ ˆ
    æ€è·¯ï¼š
        æœ¬é¢˜çš„æ€è·¯æ˜¯å°†åŽŸé—®é¢˜è½¬åŒ–ä¸ºç±»ä¼¼äºŽ84é¢˜çš„å½¢å¼ç„¶åŽæ±‚è§£ã€‚éžå¸¸å·§å¦™ï¼
            å…³é”®ä¸€æ­¥å°±æ˜¯å°†é—®é¢˜è½¬åŒ–ï¼Œå¯ä»¥å°†çŸ©å½¢åˆ†è§£ä¸ºé•¿ä¹˜å®½ï¼Œæˆ–è€…è¯´åº•ä¹˜é«˜ï¼Œé‚£ä¹ˆå¯ä»¥éåŽ†çŸ©é˜µçš„è¡Œï¼Œä»¥æ¯ä¸€è¡Œçš„1çš„ä½ç½®åšåº•ï¼Œ
        è¿™ä¸€è¡Œä¸Šç¬¬iä¸ªä½ç½®è¿™ä¸€åˆ—ä¸­'1'çš„ä¸ªæ•°åšé«˜ï¼Œå°±å¯ä»¥æž„å»ºå‡ºä¸€ä¸ªç›´æ–¹å›¾ï¼Œä¾¿åœ¨å½“å‰è¿™ä¸€è¡Œä¸­æž„å»ºå‡ºäº†ç¬¬84é¢˜çš„å½¢å¼ï¼Œç”¨
        å•è°ƒæ ˆæ±‚è§£å³å¯ã€‚é‚£ä¹ˆå¯¹æ•´ä¸ªmatrixçš„æ‰€æœ‰rowéåŽ†æž„å»ºç›´æ–¹å›¾è®¡ç®—çŸ©å½¢é¢ç§¯ï¼Œå°±å¯ä»¥æ±‚è§£å‡ºæ•´ä¸ªçŸ©å½¢ä¸­çš„æœ€å¤§'1'çŸ©å½¢é¢ç§¯ã€‚
        è¦ç†è§£ðŸ‘†è¿™ç§åˆ†è§£ä¸€è¡Œä¸€è¡Œï¼Œè‡ªä¸Šå‘ä¸‹ç´¯è®¡ç›´æ–¹å›¾çš„æ–¹å¼ï¼Œæ˜¯ä¸€å®šèƒ½éåŽ†å®Œæ‰€æœ‰çŸ©é˜µä¸­çš„çŸ©å½¢çš„ã€‚
        å‡è®¾æŠŠçŸ©é˜µæ²¿ç€æŸä¸€è¡Œåˆ†å¼€ï¼Œç„¶åŽæŠŠåˆ†å¼€çš„è¡Œä½œä¸ºåº•é¢ï¼Œå°†è‡ªåº•é¢å¾€ä¸Šçš„çŸ©é˜µçœ‹æˆä¸€ä¸ªç›´æ–¹å›¾ï¼ˆhistogramï¼‰ã€‚
     ç›´æ–¹å›¾çš„ä¸­æ¯ä¸ªé¡¹çš„é«˜åº¦å°±æ˜¯ä»Žåº•é¢è¡Œå¼€å§‹å¾€ä¸Š1çš„æ•°é‡ã€‚æ ¹æ®Largest Rectangle in Histogramå°±å¯ä»¥æ±‚å‡º
     å½“å‰è¡Œä½œä¸ºçŸ©é˜µä¸‹è¾¹ç¼˜çš„ä¸€ä¸ªæœ€å¤§çŸ©é˜µã€‚æŽ¥ä¸‹æ¥å¦‚æžœå¯¹æ¯ä¸€è¡Œéƒ½åšä¸€æ¬¡Largest Rectangle in Histogramï¼Œ
     ä»Žå…¶ä¸­é€‰å‡ºæœ€å¤§çš„çŸ©é˜µï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯æ•´ä¸ªçŸ©é˜µä¸­é¢ç§¯æœ€å¤§çš„å­çŸ©é˜µã€‚
        å¦‚ä½•è®¡ç®—æŸä¸€è¡Œä¸ºåº•é¢æ—¶ç›´æ–¹å›¾çš„é«˜åº¦å‘¢ï¼Ÿå¦‚æžœé‡æ–°è®¡ç®—ï¼Œé‚£ä¹ˆæ¯æ¬¡éœ€è¦çš„è®¡ç®—æ•°é‡å°±æ˜¯å½“å‰è¡Œæ•°ä¹˜ä»¥åˆ—æ•°ã€‚
     ç„¶è€Œä¼šå‘çŽ°ä¸€äº›åŠ¨æ€è§„åˆ’çš„è¸ªè¿¹ï¼Œå¦‚æžœçŸ¥é“ä¸Šä¸€è¡Œç›´æ–¹å›¾çš„é«˜åº¦ï¼Œå°±åªéœ€è¦çœ‹æ–°åŠ è¿›æ¥çš„è¡Œï¼ˆåº•é¢ï¼‰ä¸Šå¯¹åº”çš„åˆ—
     å…ƒç´ æ˜¯ä¸æ˜¯0ï¼Œå¦‚æžœæ˜¯ï¼Œåˆ™é«˜åº¦æ˜¯0ï¼Œå¦åˆ™åˆ™æ˜¯ä¸Šä¸€è¡Œç›´æ–¹å›¾çš„é«˜åº¦åŠ 1ã€‚åˆ©ç”¨åŽ†å²ä¿¡æ¯ï¼Œå°±å¯ä»¥åœ¨çº¿è¡Œæ—¶é—´å†…
     å®Œæˆå¯¹é«˜åº¦çš„æ›´æ–°ã€‚ç”±äºŽLargest Rectangle in Histogramçš„ç®—æ³•å¤æ‚åº¦æ˜¯O(n)ã€‚æ‰€ä»¥å®Œæˆå¯¹ä¸€è¡Œä¸ºåº•è¾¹çš„
     çŸ©é˜µæ±‚è§£å¤æ‚åº¦æ˜¯O(n+n)=O(n)ã€‚æŽ¥ä¸‹æ¥å¯¹æ¯ä¸€è¡Œéƒ½åšä¸€æ¬¡ï¼Œé‚£ä¹ˆç®—æ³•æ€»æ—¶é—´å¤æ‚åº¦æ˜¯O(m*n)ã€‚

    """